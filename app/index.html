<!doctype html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>My AngularJS App</title>
  <link rel="stylesheet" href="css/app.css"/>
  <link href="css/bootstrap.min.css" rel="stylesheet">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  
  <script type='text/javascript'>
//stores access token for later use.
var access;
var myValue;
var myValue2;
$(function (){
// Initialize library
SE.init({ 
    // Parameters obtained by registering an app, these are specific to the SE
    //   documentation site
    clientId: 2919, 
    key: '5Ti3ah)Ot6fuG66HSW02gg((', 
    // Used for cross domain communication, it will be validated'http://JasonYang521.github.io/app/index.html'
    //channelUrl:'http://localhost:8000/app/index.html',
	channelUrl:'http://JasonYang521.github.io/app/index.html',
    // Called when all initialization is finished
    complete: function(data) { 
        $('#login-button')
            .removeAttr('disabled')
            .text('Login'); 
    }
});
// Attach click handler to login button
$('#login-button').click(function() {

    // Make the authentication call, note that being in an onclick handler
    //   is important; most browsers will hide windows opened without a
    //   'click blessing'
    SE.authenticate({
        success: function(data) { 
			access= data.accessToken
            alert(
                'User Authorized with account id = ' + 
                data.networkUsers[0].account_id + ', got access token = ' + 
                access
            );  
						document.getElementById('comments1').innerHTML=access;
        },
        error: function(data) { 
            alert('An error occurred:\n' + data.errorName + '\n' + data.errorMessage); 
        },
		scope: ['read_inbox','private_info','write_access','no_expiry'],
        networkUsers: true
    });
});
});
function Hello2($scope, $http)
{
$.ajax({
        type: 'GET',
        url: 'http://us.battle.net/api/wow/item/set/1060',
        crossDomain: true,
        async: false,
        jsonpCallback: 'jsonCallback',
        dataType: 'jsonp',
        contentType:'application/json',
        success: function(data) {        
            $scope.wow = data;
			myValue = data;
			//document.getElementById('comments').innerHTML=$scope.wow.items;
			document.getElementById('comments1').innerHTML=myValue.items;
        },
		jsonp: 'jsonp'    
    });	
}
 function getUser($scope, $http) {
	//alert('https://api.stackexchange.com/2.2/me/posts?client_id=2919&site=stackoverflow.com&key=5Ti3ah)Ot6fuG66HSW02gg((&access_token='+access);
    $http.get('https://api.stackexchange.com/2.2/me/posts?client_id=2919&site=stackoverflow.com&key=5Ti3ah)Ot6fuG66HSW02gg((&access_token='+access).
	//$http.get('https://api.stackexchange.com/2.2/me?client_id=2919&site=stackoverflow.com&key=5Ti3ah)Ot6fuG66HSW02gg((&access_token=oDFuwVjUjjDyJytZrcxs5g))').
        success(function(data) {
            $scope.greeting = data;
			var creationDate = "Creation Date: " + new Date($scope.greeting.items[0].creation_date);
			document.getElementById('comments1').innerHTML=creationDate;
        });		
		
}

</script>
</head>
<body>
	
    <div class="navbar navbar-inverse navbar-static-top">

        <div class="container">
			<!--if multiple accounts will use first listed account as name-->
			<a href="#" class="navbar-brand logo"><div ng-controller="getUser"><b>{{greeting.items[0].display_name}}</b>Corner</div> </a>
            <!--<a href="#" class="navbar-brand no-padding"><div class="navbar-brand" style="background-image: url(/Content/Link.png)">Yang's Corner</div></a>-->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse">

                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>

                </button>
            </div>


            <div class="collapse navbar-collapse navHeaderCollapse">

                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a id="login-button" data-toggle="tab"><span class="glyphicon glyphicon-home"></span>Authenticating App</a></li>
                    <li><a data-toggle="tab"><span class="glyphicon glyphicon-user"></span>&nbsp;Personal Information</a></li>
                    <li><a href="#" data-toggle="tab"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;Search</a></li>
                    <li class="dropdown" data-toggle="tab">
                        <a class="dropdown-toggle; menu-size" data-toggle="dropdown">Quick Menu<b class="caret"></b></a>
                        <ul class="dropdown-menu menusize">
                            <li><a href="#">&nbsp;Login</a></li>
                            <li><a href="#">&nbsp;Questions</a></li>
                            <li><a href="#">&nbsp;Answers</a></li>
                            <li class="divider"></li>
                            <li class="dropdown-header">Contacts</li>
                            <li><a href="#/view1"><span class="glyphicon glyphicon-earphone"></span>&nbsp;My Info</a></li>
                            <li><a href="#" ><span class="glyphicon glyphicon-earphone"></span>&nbsp;References</a></li>
                        </ul>
                    </li>
                </ul>

            </div>

        </div>

    </div>
	
<div class="container">
  <ul class="menu" >
    <li><a href="#/view1">Home</a></li>
    <li><a href="#/view2">Search</a></li>
	<li><a href="#/view3">Questions</a></li>
	
  </ul>
  <div id="comments1">User Information:  Please Login to see information:</div>
  <div id="comments2">THis div</div>
    <div id="comments3">TESTING!!!!!!!!!</div>
	
		<div ng-controller="Hello2">
			<p>The ID is {{wow.items}}</p>
			<ul ng-repeat="item in wow.items">
			<li>The Value and Key  is {{item}}</li>
		</div>
	
  		</div>



  <!--https://api.stackexchange.com/2.2/me/posts?client_id=2917&access_token=ocM4YfTiEuKZRR6VsvPLPA))&expires=86399&site=stackoverflow.com&key=7VAo2cWS6XfA97iCM)rEGw((
			<div ng-controller="Hello">
			<p>The ID is {{greeting.items[0].owner}}</p>
				<ul ng-repeat="item in greeting.items">
			<li>The Value and Key  is {{item.owner.reputation}}</li>
		</ul>-->
	
  <div ng-view class="container"></div>

  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
  -->
    <script type='text/javascript' src='https://api.stackexchange.com/js/2.0/all.js'></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="../bower_components/angular/angular.js"></script>
  <script src="../bower_components/angular-route/angular-route.js"></script>
  <script src="js/app.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
</body>
</html>
